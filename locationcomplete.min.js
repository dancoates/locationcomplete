(function(b,a,c){b.fn.locationComplete=function(i,m){var f=this;var v=f.val();var u;var j=null;var k=0;var l=false;var t={limit:10,interval:100,postCodeIndex:0,stateIndex:2,placeIndex:1,maxHeight:200,searchAfter:2,resultsElement:"ul",resultElement:"li",resultsClass:"lc-results-container",resultClass:"lc-result-item",loadingMessage:"Loading locations..."};
var s=["url"];var z=b.extend(t,i);function y(){var C=s.length;while(C--){if(!z[s[C]]){console.error("Error: "+s[C]+" is not defined");return;}}f.data("placeholder",f.attr("placeholder"));
f.attr("placeholder",z.loadingMessage);d();}function d(){if(r()&&localStorage.getItem("postcodeDataURL")===z.url){g(localStorage.getItem("postcodeData"));
}else{b.ajax({url:z.url,success:g,error:function(){console.error("Error: Data load failed");}});}}function g(H){if(r()){localStorage.setItem("postcodeData",H);
localStorage.setItem("postcodeDataURL",z.url);}var C=H.split("\n");var G=C.length;var E=[];if(G===1){console.error("Error: error parsing csv, check line endings - they should be unix");
return;}while(G--){var D={};D.value=C[G];var F=C[G].split(",");D.tokens=F[z.placeIndex].split(" ").concat([F[z.postCodeIndex],F[z.stateIndex]]);E.push(D);
}j=E;x();}function x(C){f.on("focus",B);f.on("blur",A);f.attr("placeholder",f.data("placeholder"));if(f.is(":focus")){B();}if(m){m(f);}w([]);}function B(){q(true);
u=setInterval(q,z.interval);}function A(){if(!l){b("."+z.resultsClass).hide();clearInterval(u);}}function q(D){if(f.val()===v&&!D){return;}var C=f.val().toLowerCase();
if(C.length<=z.searchAfter){if(b("."+z.resultClass).length>0){w([]);v=f.val();}return;}if(C.split(",").length>2){if(b("."+z.resultClass).length>0){w([]);
v=f.val();}return;}var E=C.split(" ");var H=[];var I=j.length;while(I--){var K=false;var N=0;var F=E.length;while(F--){if(E[F].length>1){if(j[I].value.indexOf(E[F])!==-1){K=true;
var M=[].concat(j[I].tokens);var G=M.length;while(G--){var L=M[G].indexOf(E[F]);if(L!==-1){N+=2;if(j[I].value.indexOf(C)!==-1){N++;}if(G===F){N++;}N+=(4/(L+1));
N+=(E[F].length/M[G].length)*2;if(E[F]===M[G]){N++;}M[G]="";break;}}}}else{if(C.length>1&&j[I].value.indexOf(C)!==-1){N+=3;}}}if(K){var J=N/(j[I].tokens.length/E.length);
H.push([j[I].value,J]);}}H=H.sort(function(P,O){return P[1]<O[1]?1:-1;});H=H.slice(0,z.limit);v=f.val();w(H);}function w(E){var L=b("."+z.resultsClass);
var K=L.length>0;L=K?L:b("<"+z.resultsElement+' style="max-height:'+z.maxHeight+'px; overflow-y: auto;"/>').addClass(z.resultsClass);if(E.length===0){if(f.val().length<z.searchAfter){L.empty();
}L.hide();return;}var G="";for(var F=0;F<E.length;F++){var J=E[F][0].split(",");var H=J[0];var D=h(J[1]);var C=J[2].toUpperCase();var I=F===0?"lc-focused":"";
G+="<"+z.resultElement+' class="'+z.resultClass+" "+I+'">';G+=(D+", "+C+", "+H);G+="</"+z.resultElement+">";}L.empty().html(G).scrollTop(0);if(!K){f.after(L);
e(L);}else{L.show();}}function e(C){var D=b("."+z.resultsClass);D.on("mouseenter mouseleave","."+z.resultClass,function(E){b(".lc-focused").removeClass("lc-focused");
b(this).toggleClass("lc-focused");});D.on("mousedown","."+z.resultClass,function(E){n(E,f[0]);});D.on("mousedown",function(E){l=true;return false;});b("html").on("mousedown",function(E){if(!b(E.target).hasClass(z.resultsClass)&&l){l=false;
w([]);}});f.on("keydown",function(H){switch(H.keyCode){case 38:o(H,this);break;case 40:p(H,this);break;case 13:case 9:n(H,this);break;default:return;}var F=b(".lc-focused");
if(F.length===0){return;}var G=F.offset().top;var E=(C.height()/2)-(F.height()/2)+C.offset().top-C.scrollTop();var I=G-E;if(I>0){C.scrollTop(I);}else{C.scrollTop(0);
}});}function o(F,E){if(E.value.length<=z.searchAfter){return;}F.preventDefault();var D=b(".lc-focused");D.removeClass("lc-focused");var C=D.prev();if(D.length===0||C.length===0){b("."+z.resultClass).last().addClass("lc-focused");
}else{C.addClass("lc-focused");}}function p(F,E){if(E.value.length<=z.searchAfter){return;}F.preventDefault();var D=b(".lc-focused");D.removeClass("lc-focused");
var C=D.next();if(D.length===0||C.length===0){b("."+z.resultClass).first().addClass("lc-focused");}else{C.addClass("lc-focused");}}function n(E,D){var C=b(".lc-focused");
if((D.value.split(",").length===3&&D.value===C.text())||D.value.length<z.searchAfter){return;}E.preventDefault();if(C.length===0){C=b("."+z.resultClass).first();
}f.val(C.text());q();}this.validate=function(J){if(!j){return true;}var K=J||f.val();var F=K.toLowerCase().split(",");if(F.length!==3){return false;}var D=b.trim(F[0]);
var C=b.trim(F[1]);var H=b.trim(F[2]);var I=[];I[z.placeIndex]=D;I[z.stateIndex]=C;I[z.postCodeIndex]=H;var L=I.join(",");var E=j.length;var G=false;while(E--){if(j[E].value===L){G=true;
}}return G;};(function(){var G;var F=function(){};var D=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];
var E=D.length;var C=(a.console=a.console||{});while(E--){G=D[E];if(!C[G]){C[G]=F;}}}());function r(){try{localStorage.setItem("test","testing");localStorage.removeItem("test");
return true;}catch(C){return false;}}function h(C){return C.replace(/\w\S*/g,function(D){return D.charAt(0).toUpperCase()+D.substr(1).toLowerCase();});
}y();return this;};})(jQuery,window);