(function(b,a,c){b.fn.locationComplete=function(i){var e=this;var r=e.val();var q;var j=null;var p={limit:10,interval:100,postCodeIndex:0,stateIndex:2,placeIndex:1,maxHeight:200,searchAfter:2,resultsElement:"ul",resultElement:"li",resultsClass:"lc-results-container",resultClass:"lc-result-item"};
var o=["url"];var v=b.extend(p,i);function u(){var y=o.length;while(y--){if(!v[o[y]]){console.error("Error: "+o[y]+" is not defined");return;}}d();}function d(){b.ajax({url:v.url,success:g,error:function(){console.error("Error: Data load failed");
}});}function g(C){var y=C.split("\n");var B=y.length;var A=[];if(B===1){console.error("Error: error parsing csv, check line endings - they should be unix");
return;}while(B--){var z={};z.value=y[B];var D=y[B].split(",");z.tokens=D[v.placeIndex].split(" ").concat([D[v.postCodeIndex],D[v.stateIndex]]);A.push(z);
}j=A;s();}function s(y){e.on("focus",x);e.on("blur",w);}function x(y){q=setInterval(n,v.interval);}function w(){clearInterval(q);}function n(){if(e.val()===r){return;
}var y=e.val().toLowerCase();if(y.length<=v.searchAfter){return;}if(y.split(",").length>2){if(b("."+v.resultClass).length>0){t([]);}return;}var A=y.split(" ");
var D=[];var E=j.length;var z=new Date().getTime();while(E--){var H=false;var G=0;var B=A.length;while(B--){if(A[B].length>1){var C=j[E].tokens.length;
if(j[E].value.indexOf(A[B])!==-1){H=true;while(C--){if(j[E].tokens[C].indexOf(A[B])!==-1){G++;if(j[E].tokens[C]===A[B]){G++;}}}}}}if(H){var F=G/j[E].tokens.length;
D.push([j[E].value,F]);}}D=D.sort(function(J,I){return J[1]<I[1]?1:-1;});D=D.slice(0,v.limit);r=e.val();console.log("processing took "+(new Date().getTime()-z)+"ms");
t(D);}function t(B){var z=new Date().getTime();var H=b("."+v.resultsClass);var G=H.length>0;H=G?H:b("<"+v.resultsElement+' style="max-height:'+v.maxHeight+'px; overflow-y: auto;"/>').addClass(v.resultsClass);
var D="";for(var C=0;C<B.length;C++){var F=B[C][0].split(",");var E=F[0];var A=h(F[1]);var y=F[2].toUpperCase();D+='<li class="'+v.resultClass+'">';D+=(A+", "+y+", "+E);
D+="</li>";}H.empty().html(D);if(!G){e.after(H);f(H);}console.log("drawing took "+(new Date().getTime()-z)+"ms");}function f(y){b("."+v.resultsClass).on("mouseenter mouseleave","."+v.resultClass,function(z){b(".lc-focused").removeClass("lc-focused");
b(this).toggleClass("lc-focused");});b("."+v.resultsClass).on("click","."+v.resultClass,function(z){e.val(b(this).text());n();});e.on("keydown",function(C){if(b(this).val().split(",").length>2){return;
}switch(C.keyCode){case 38:l();break;case 40:m();break;case 13:k();break;default:return;}C.preventDefault();var A=b(".lc-focused");if(A.length===0){return;
}var B=A.offset().top;var z=(y.height()/2)-(A.height()/2)+y.offset().top-y.scrollTop();var D=B-z;if(D>0){y.scrollTop(D);}else{y.scrollTop(0);}});}function l(){var z=b(".lc-focused");
z.removeClass("lc-focused");var y=z.prev();if(z.length===0||y.length===0){b("."+v.resultClass).last().addClass("lc-focused");}else{y.addClass("lc-focused");
}}function m(){var z=b(".lc-focused");z.removeClass("lc-focused");var y=z.next();if(z.length===0||y.length===0){b("."+v.resultClass).first().addClass("lc-focused");
}else{y.addClass("lc-focused");}}function k(){var y=b(".lc-focused");if(y.length===0){y=b("."+v.resultClass).first();}e.val(y.text());n();}(function(){var C;
var B=function(){};var z=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];
var A=z.length;var y=(a.console=a.console||{});while(A--){C=z[A];if(!y[C]){y[C]=B;}}}());function h(y){return y.replace(/\w\S*/g,function(z){return z.charAt(0).toUpperCase()+z.substr(1).toLowerCase();
});}u();return this;};})(jQuery,window);