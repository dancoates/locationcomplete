(function(b,a,c){b.fn.locationComplete=function(i,m){var f=this;var w=f.val();var v;var j=null;var k=0;var l=false;var t={limit:10,interval:100,postCodeIndex:0,stateIndex:2,placeIndex:1,maxHeight:200,searchAfter:2,resultsElement:"ul",resultElement:"li",resultsClass:"lc-results-container",resultClass:"lc-result-item",loadingMessage:"Loading locations...",appendTo:false};
var s=["url"];var A=b.extend(t,i);var u=!A.appendTo||f.closest(A.appendTo);function z(){var D=s.length;while(D--){if(!A[s[D]]){console.error("Error: "+s[D]+" is not defined");
return;}}f.data("placeholder",f.attr("placeholder"));f.attr("placeholder",A.loadingMessage);d();}function d(){if(r()&&localStorage.getItem("postcodeDataURL")===A.url){g(localStorage.getItem("postcodeData"));
}else{b.ajax({url:A.url,success:g,error:function(){console.error("Error: Data load failed");}});}}function g(I){if(r()){localStorage.setItem("postcodeData",I);
localStorage.setItem("postcodeDataURL",A.url);}var D=I.split("\n");var H=D.length;var F=[];if(H===1){console.error("Error: error parsing csv, check line endings - they should be unix");
return;}while(H--){var E={};E.value=D[H];var G=D[H].split(",");E.tokens=G[A.placeIndex].split(" ").concat([G[A.postCodeIndex],G[A.stateIndex]]);F.push(E);
}j=F;y();}function y(D){f.on("focus",C);f.on("blur",B);f.attr("placeholder",f.data("placeholder")||"");if(f.is(":focus")){C();}if(m){m(f);}x([]);}function C(){q(true);
v=setInterval(q,A.interval);}function B(){if(!l){b("."+A.resultsClass).hide();clearInterval(v);}}function q(E){if(f.val()===w&&!E){return;}var D=f.val().toLowerCase();
if(D.length<=A.searchAfter){if(b("."+A.resultClass).length>0){x([]);w=f.val();}return;}if(D.split(",").length>2){if(b("."+A.resultClass).length>0){x([]);
w=f.val();}return;}var F=D.split(" ");var I=[];var J=j.length;while(J--){var L=false;var O=0;var G=F.length;while(G--){if(F[G].length>1){if(j[J].value.indexOf(F[G])!==-1){L=true;
var N=[].concat(j[J].tokens);var H=N.length;while(H--){var M=N[H].indexOf(F[G]);if(M!==-1){O+=2;if(j[J].value.indexOf(D)!==-1){O++;}if(H===G){O++;}O+=(4/(M+1));
O+=(F[G].length/N[H].length)*2;if(F[G]===N[H]){O++;}N[H]="";break;}}}}else{if(D.length>1&&j[J].value.indexOf(D)!==-1){O+=3;}}}if(L){var K=O/(j[J].tokens.length/F.length);
I.push([j[J].value,K]);}}I=I.sort(function(Q,P){return Q[1]<P[1]?1:-1;});I=I.slice(0,A.limit);w=f.val();x(I);}function x(F){var M=b("."+A.resultsClass);
var L=M.length>0;M=L?M:b("<"+A.resultsElement+' style="max-height:'+A.maxHeight+'px; overflow-y: auto;"/>').addClass(A.resultsClass);if(F.length===0){if(f.val().length<A.searchAfter){M.empty();
}M.hide();return;}var H="";for(var G=0;G<F.length;G++){var K=F[G][0].split(",");var I=K[0];var E=h(K[1]);var D=K[2].toUpperCase();var J=G===0?"lc-focused":"";
H+="<"+A.resultElement+' class="'+A.resultClass+" "+J+'">';H+=(E+", "+D+", "+I);H+="</"+A.resultElement+">";}M.empty().html(H).scrollTop(0);if(!L){if(A.appendTo){u.append(M);
}else{f.after(M);}e(M);}else{M.show();}}function e(D){var E=b("."+A.resultsClass);E.on("mouseenter mouseleave","."+A.resultClass,function(F){b(".lc-focused").removeClass("lc-focused");
b(this).toggleClass("lc-focused");});E.on("mousedown","."+A.resultClass,function(F){n(F,f[0]);});E.on("mousedown",function(F){l=true;return false;});b("html").on("mousedown",function(F){if(!b(F.target).hasClass(A.resultsClass)&&l){l=false;
x([]);}});f.on("keydown",function(I){switch(I.keyCode){case 38:o(I,this);break;case 40:p(I,this);break;case 13:case 9:n(I,this);break;default:return;}var G=b(".lc-focused");
if(G.length===0){return;}var H=G.offset().top;var F=(D.height()/2)-(G.height()/2)+D.offset().top-D.scrollTop();var J=H-F;if(J>0){D.scrollTop(J);}else{D.scrollTop(0);
}});}function o(G,F){if(F.value.length<=A.searchAfter){return;}G.preventDefault();var E=b(".lc-focused");E.removeClass("lc-focused");var D=E.prev();if(E.length===0||D.length===0){b("."+A.resultClass).last().addClass("lc-focused");
}else{D.addClass("lc-focused");}}function p(G,F){if(F.value.length<=A.searchAfter){return;}G.preventDefault();var E=b(".lc-focused");E.removeClass("lc-focused");
var D=E.next();if(E.length===0||D.length===0){b("."+A.resultClass).first().addClass("lc-focused");}else{D.addClass("lc-focused");}}function n(F,E){var D=b(".lc-focused");
if((E.value.split(",").length===3&&E.value===D.text())||E.value.length<A.searchAfter){return;}F.preventDefault();if(D.length===0){D=b("."+A.resultClass).first();
}f.val(D.text());q();}this.validate=function(K){if(!j){return true;}var L=K||f.val();var G=L.toLowerCase().split(",");if(G.length!==3){return false;}var E=b.trim(G[0]);
var D=b.trim(G[1]);var I=b.trim(G[2]);var J=[];J[A.placeIndex]=E;J[A.stateIndex]=D;J[A.postCodeIndex]=I;var M=J.join(",");var F=j.length;var H=false;while(F--){if(j[F].value===M){H=true;
}}return H;};(function(){var H;var G=function(){};var E=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];
var F=E.length;var D=(a.console=a.console||{});while(F--){H=E[F];if(!D[H]){D[H]=G;}}}());function r(){try{localStorage.setItem("test","testing");localStorage.removeItem("test");
return true;}catch(D){return false;}}function h(D){return D.replace(/\w\S*/g,function(E){return E.charAt(0).toUpperCase()+E.substr(1).toLowerCase();});
}z();return this;};})(jQuery,window);