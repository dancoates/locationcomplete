(function(b,a,c){b.fn.locationComplete=function(i){var f=this;var t=f.val();var s;var j=null;var k=0;var r={limit:10,interval:100,postCodeIndex:0,stateIndex:2,placeIndex:1,maxHeight:200,searchAfter:2,resultsElement:"ul",resultElement:"li",resultsClass:"lc-results-container",resultClass:"lc-result-item",loadingMessage:"Loading locations..."};
var q=["url"];var x=b.extend(r,i);function w(){var A=q.length;while(A--){if(!x[q[A]]){console.error("Error: "+q[A]+" is not defined");return;}}f.data("placeholder",f.attr("placeholder"));
f.attr("placeholder",x.loadingMessage);d();}function d(){if(p()&&localStorage.getItem("postcodeDataURL")===x.url){g(localStorage.getItem("postcodeData"));
}else{b.ajax({url:x.url,success:g,error:function(){console.error("Error: Data load failed");}});}}function g(F){if(p()){localStorage.setItem("postcodeData",F);
localStorage.setItem("postcodeDataURL",x.url);}var A=F.split("\n");var E=A.length;var C=[];if(E===1){console.error("Error: error parsing csv, check line endings - they should be unix");
return;}while(E--){var B={};B.value=A[E];var D=A[E].split(",");B.tokens=D[x.placeIndex].split(" ").concat([D[x.postCodeIndex],D[x.stateIndex]]);C.push(B);
}j=C;u();}function u(A){f.on("focus",z);f.on("blur",y);f.attr("placeholder",f.data("placeholder"));if(f.is(":focus")){z();}v([]);}function z(A){s=setInterval(o,x.interval);
}function y(){b("."+x.resultsClass).hide();clearInterval(s);}function o(){if(f.val()===t){return;}var A=f.val().toLowerCase();if(A.length<=x.searchAfter){if(b("."+x.resultClass).length>0){v([]);
t=f.val();}return;}if(A.split(",").length>2){if(b("."+x.resultClass).length>0){v([]);t=f.val();}return;}var B=A.split(" ");var E=[];var F=j.length;while(F--){var H=false;
var K=0;var C=B.length;while(C--){if(B[C].length>1){if(j[F].value.indexOf(B[C])!==-1){H=true;var J=[].concat(j[F].tokens);var D=J.length;while(D--){var I=J[D].indexOf(B[C]);
if(I!==-1){K+=2;if(j[F].value.indexOf(A)!==-1){K++;}if(D===C){K++;}K+=(4/(I+1));K+=(B[C].length/J[D].length)*2;if(B[C]===J[D]){K++;}J[D]="";break;}}}}else{if(A.length>1&&j[F].value.indexOf(A)!==-1){K+=3;
}}}if(H){var G=K/(j[F].tokens.length/B.length);E.push([j[F].value,G]);}}E=E.sort(function(M,L){return M[1]<L[1]?1:-1;});E=E.slice(0,x.limit);t=f.val();
v(E);}function v(C){var J=b("."+x.resultsClass);var I=J.length>0;J=I?J:b("<"+x.resultsElement+' style="max-height:'+x.maxHeight+'px; overflow-y: auto;"/>').addClass(x.resultsClass);
if(C.length===0){if(f.val().length<x.searchAfter){J.empty();}J.hide();return;}var E="";for(var D=0;D<C.length;D++){var H=C[D][0].split(",");var F=H[0];
var B=h(H[1]);var A=H[2].toUpperCase();var G=D===0?"lc-focused":"";E+="<"+x.resultElement+' class="'+x.resultClass+" "+G+'">';E+=(B+", "+A+", "+F);E+="</"+x.resultElement+">";
}J.empty().html(E).scrollTop(0);if(!I){f.after(J);e(J);}else{J.show();}}function e(A){b("."+x.resultsClass).on("mouseenter mouseleave","."+x.resultClass,function(B){b(".lc-focused").removeClass("lc-focused");
b(this).toggleClass("lc-focused");});b("."+x.resultsClass).on("mousedown","."+x.resultClass,function(B){l(B,f[0]);});f.on("keydown",function(E){switch(E.keyCode){case 38:m(E,this);
break;case 40:n(E,this);break;case 13:case 9:l(E,this);break;default:return;}var C=b(".lc-focused");if(C.length===0){return;}var D=C.offset().top;var B=(A.height()/2)-(C.height()/2)+A.offset().top-A.scrollTop();
var F=D-B;if(F>0){A.scrollTop(F);}else{A.scrollTop(0);}});}function m(D,C){if(C.value.length<=x.searchAfter){return;}D.preventDefault();var B=b(".lc-focused");
B.removeClass("lc-focused");var A=B.prev();if(B.length===0||A.length===0){b("."+x.resultClass).last().addClass("lc-focused");}else{A.addClass("lc-focused");
}}function n(D,C){if(C.value.length<=x.searchAfter){return;}D.preventDefault();var B=b(".lc-focused");B.removeClass("lc-focused");var A=B.next();if(B.length===0||A.length===0){b("."+x.resultClass).first().addClass("lc-focused");
}else{A.addClass("lc-focused");}}function l(C,B){var A=b(".lc-focused");if((B.value.split(",").length===3&&B.value===A.text())||B.value.length<x.searchAfter){return;
}C.preventDefault();if(A.length===0){A=b("."+x.resultClass).first();}f.val(A.text());o();}(function(){var E;var D=function(){};var B=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];
var C=B.length;var A=(a.console=a.console||{});while(C--){E=B[C];if(!A[E]){A[E]=D;}}}());function p(){try{localStorage.setItem("test","testing");localStorage.removeItem("test");
return true;}catch(A){return false;}}function h(A){return A.replace(/\w\S*/g,function(B){return B.charAt(0).toUpperCase()+B.substr(1).toLowerCase();});
}w();return this;};})(jQuery,window);